"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[982],{2144:(e,t,s)=>{s.d(t,{y9:()=>d,Ds:()=>m,Fy:()=>u,ph:()=>h,xw:()=>x,GP:()=>f,PL:()=>o,VI:()=>i,Ln:()=>n,AT:()=>c,zj:()=>p});let r={A:10,E:10,I:10,O:8,U:8,H:8,L:8,R:8,S:8,T:8,W:8,C:8,K:8,M:8,N:8,P:8,D:6,J:6,V:6,G:4,Q:4,Y:4,B:2,F:2,X:2,Z:2,MASTER:15},a={A:4,E:4,I:4,O:3,U:3,H:3,L:3,R:3,S:3,T:3,W:3,C:1,K:1,M:1,N:1,P:1,D:1,J:1,V:1,G:1,Q:1,Y:1,B:1,F:1,X:1,Z:1,MASTER:1};function n(e){return e.length>=2&&/^[A-Z]+$/.test(e)}async function l(e){let{isValidDictionaryWordCached:t}=await Promise.all([s.e(464),s.e(856)]).then(s.bind(s,3856));return t(e)}function d(e,t,s){if(s.length!==e.length+t.length)return!1;let r=new Map,a=new Map,n=new Map;for(let t of e)r.set(t,(r.get(t)||0)+1);for(let e of t)a.set(e,(a.get(e)||0)+1);for(let e of s)n.set(e,(n.get(e)||0)+1);for(let[e,t]of n)if(t!==(r.get(e)||0)+(a.get(e)||0))return!1;for(let[e,t]of r)if((n.get(e)||0)<t)return!1;for(let[e,t]of a)if((n.get(e)||0)<t)return!1;return!0}function i(e){let t=function(e){let t=[...e];for(let e=t.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}(function(){let e=[],t=0;Object.entries(a).forEach(s=>{let[a,n]=s;for(let s=0;s<n;s++)e.push({id:"card_".concat(t++),letter:a,points:r[a],isMaster:"MASTER"===a})});let s=Object.values(a).reduce((e,t)=>e+t,0);if(e.length!==s)throw Error("Deck creation error: Expected ".concat(s," cards, got ").concat(e.length));return console.log("Deck created with ".concat(e.length," cards")),e}()),{updatedPlayers:s,remainingDeck:n,discardPile:l}=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=e.map(e=>({...e,hand:[]})),a=[...t];console.log("Dealing ".concat(s," cards to ").concat(e.length," players from deck of ").concat(t.length," cards"));for(let e=0;e<s;e++)for(let t=0;t<r.length;t++)if(a.length>0){let e=a.pop();r[t].hand=[...r[t].hand,e]}else{console.warn("Deck ran out during dealing! Round ".concat(e,", Player ").concat(t));break}let n=!1;if(r.forEach((e,t)=>{e.hand.length!==s&&(console.error("ERROR: Player ".concat(t," (").concat(e.name,") has ").concat(e.hand.length," cards instead of ").concat(s,"!")),console.error("Player hand:",e.hand.map(e=>e.letter)),n=!0)}),n)throw Error("Card dealing error: Players have wrong number of cards. Expected ".concat(s," each."));let l=[];return console.log("Dealing complete. Remaining deck: ".concat(a.length," cards, Discard pile: ").concat(l.length," cards")),{updatedPlayers:r,remainingDeck:a,discardPile:l}}(e.map((e,t)=>({id:"player_".concat(t),name:e,hand:[],score:0,isCurrentTurn:0===t,hasDiscardedThisTurn:!1})),t),d={players:s,currentPlayerIndex:0,deck:n,discardPile:l,tempDiscardedCard:null,playedWords:[],gamePhase:"lobby",roundNumber:1,winner:null},i=g(d);return i.isValid||console.error("Game state validation failed after initialization:",i.errors),d}function o(e){return e.players[e.currentPlayerIndex]}async function c(e,t,s,r){let a=e.players.findIndex(e=>e.id===t);if(-1===a)return{success:!1,gameState:e,error:"Player not found"};if(!await l(r))return{success:!1,gameState:e,error:'"'.concat(r,'" is not a valid word. Please try a different word.')};let n=[...e.players],d={...n[a]},i=new Set(s.map(e=>e.id));d.hand=d.hand.filter(e=>!i.has(e.id));let o=s.reduce((e,t)=>e+t.points,0);d.score+=o,n[a]=d;let c=s.map(e=>({...e,letter:e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter})),m={id:"word_".concat(Date.now()),word:r,cards:c,playerId:t,playerName:d.name,score:o,timestamp:Date.now(),position:{x:0,y:0}};return{success:!0,gameState:x({...e,players:n,playedWords:[...e.playedWords,m]})}}function m(e,t,s){let r=e.players.findIndex(e=>e.id===t);if(-1===r)return e;let a=[...e.players],n={...a[r]};return n.hand=n.hand.filter(e=>e.id!==s.id),n.hasDiscardedThisTurn=!0,a[r]=n,{...e,players:a,tempDiscardedCard:s}}function u(e,t){let s=e.players.findIndex(e=>e.id===t);if(-1===s)return e;let r=e.players[s];if(!r.hasDiscardedThisTurn)return console.log("Cannot draw: must discard a card first"),e;if(0===e.deck.length)return console.log("Cannot draw: deck is empty"),e;if(r.hand.length>=10)return console.error("Player ".concat(r.name," already has ").concat(r.hand.length," cards, cannot draw more")),e;let a=[...e.deck],n=a.pop(),l=[...e.players],d={...l[s]};d.hand=[...d.hand,n],l[s]=d;let i=[...e.discardPile];e.tempDiscardedCard&&i.push(e.tempDiscardedCard);let o={...e,players:l,deck:a,discardPile:i,tempDiscardedCard:null},c=g(o);return c.isValid||console.error("Game state validation failed after drawing card:",c.errors),x(o)}function h(e,t){let s=e.players.findIndex(e=>e.id===t);if(-1===s)return e;let r=e.players[s];if(!r.hasDiscardedThisTurn)return console.log("Cannot draw from discard: must discard a card first"),e;if(e.discardPile.length<1)return console.log("Cannot draw from discard: discard pile is empty"),e;if(r.hand.length>=10)return console.error("Player ".concat(r.name," already has ").concat(r.hand.length," cards, cannot draw more")),e;let a=[...e.discardPile],n=a.pop(),l=[...e.players],d={...l[s]};d.hand=[...d.hand,n],l[s]=d;let i=[...a];e.tempDiscardedCard&&i.push(e.tempDiscardedCard);let o={...e,players:l,discardPile:i,tempDiscardedCard:null},c=g(o);return c.isValid||console.error("Game state validation failed after drawing from discard:",c.errors),x(o)}function x(e){let t=function(e){let t=e.players.find(e=>0===e.hand.length);return t?t.id:null}(e);if(t)return{...e,gamePhase:"gameOver",winner:t};let s=(e.currentPlayerIndex+1)%e.players.length;return{...e,currentPlayerIndex:s,players:e.players.map((e,t)=>({...e,isCurrentTurn:t===s,hasDiscardedThisTurn:!1}))}}function p(e){return{...i(e),gamePhase:"playing"}}function g(e){let t=[];e.players.forEach((e,s)=>{e.hand.length>10&&t.push("Player ".concat(s," (").concat(e.name,") has ").concat(e.hand.length," cards (should be â‰¤10)"))});let s=e.players.reduce((e,t)=>e+t.hand.length,0),r=e.playedWords.reduce((e,t)=>e+t.cards.length,0),n=e.discardPile.length,l=e.deck.length,d=+!!e.tempDiscardedCard,i=s+r+n+l+d,o=Object.values(a).reduce((e,t)=>e+t,0);return i!==o&&(t.push("Total cards in game (".concat(i,") doesn't match expected total (").concat(o,")")),t.push("Breakdown: Hands=".concat(s,", Played=").concat(r,", Discard=").concat(n,", Deck=").concat(l,", Temp=").concat(d))),{isValid:0===t.length,errors:t}}async function f(e,t,s,r,a){let n=e.players.findIndex(e=>e.id===t);if(-1===n)return{success:!1,gameState:e,error:"Player not found"};let i=e.playedWords.find(e=>e.id===s);if(!i)return{success:!1,gameState:e,error:"Word not found for extension"};let o=r.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter);if(!d(i.word,o,a))return{success:!1,gameState:e,error:"New word cannot be formed by inserting the selected cards into the original word"};if(!await l(a))return{success:!1,gameState:e,error:'"'.concat(a,'" is not a valid word. Please try a different word.')};let c=[...e.players],m={...c[n]},u=new Set(r.map(e=>e.id));m.hand=m.hand.filter(e=>!u.has(e.id));let h=r.reduce((e,t)=>e+t.points,0);m.score+=h,c[n]=m;let p=r.map(e=>({...e,letter:e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter})),g=function(e,t,s){let r=e.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter),a=t.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter),n=[],l=0,d=0;for(let i=0;i<s.length;i++){let o=s[i];if(l<r.length&&o===r[l])n.push(e[l]),l++;else if(d<a.length&&o===a[d])n.push(t[d]),d++;else{let e=a.findIndex((e,t)=>t>=d&&e===o);-1!==e&&(n.push(t[e]),d=e+1)}}return n}(i.cards,p,a),f={id:"word_".concat(Date.now()),word:a,cards:g,playerId:t,playerName:m.name,score:h,timestamp:Date.now(),position:i.position},y=e.playedWords.filter(e=>e.id!==s);return y.push(f),{success:!0,gameState:x({...e,players:c,playedWords:y})}}},2982:(e,t,s)=>{s.d(t,{A:()=>g});var r=s(5155),a=s(2115),n=s(2144),l=s(4698);function d(e){let{player:t,isCurrentPlayer:s,isOpponent:a=!1,selectedCards:n=new Set,onCardClick:d,shakeHand:i=!1}=e,o=Array.from(n).map(e=>t.hand.find(t=>t.id===e)).filter(e=>void 0!==e);return(0,r.jsxs)("div",{className:"h-full flex flex-col overflow-hidden relative ".concat(t.isCurrentTurn?"ring-2 ring-yellow-400 ring-opacity-75":""),children:[(0,r.jsxs)("div",{className:"flex-1 bg-white/5 backdrop-blur-sm rounded-lg p-2 mb-1 overflow-hidden ".concat(i?"animate-shake":""),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h4",{className:"text-white/80 text-xs",children:a?"Opponent's Hand":"Your Hand"}),(0,r.jsxs)("span",{className:"text-white/60 text-xs",children:["(",t.hand.length,")"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-white/80 text-xs",children:["Score: ",t.score]}),t.isCurrentTurn&&(0,r.jsx)("span",{className:"bg-yellow-500 text-black text-xs px-2 py-0.5 rounded-full font-semibold",children:"TURN"})]})]}),(0,r.jsx)("div",{className:"flex gap-2 flex-wrap overflow-hidden p-4",children:t.hand.map(e=>(0,r.jsx)(l.A,{card:e,isSelected:n.has(e.id),isFaceDown:a,onClick:()=>null==d?void 0:d(e,t.id),size:a?"sm":"md"},e.id))})]}),s&&o.length>0&&(0,r.jsxs)("div",{className:"absolute bottom-1 right-1 bg-white/10 backdrop-blur-sm rounded px-1 py-0.5 border border-white/20",children:[(0,r.jsx)("div",{className:"flex gap-0.5 justify-center",children:o.map(e=>(0,r.jsx)(l.A,{card:e,size:"sm"},e.id))}),(0,r.jsx)("p",{className:"text-white font-semibold text-center text-xs",children:o.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter).join("")})]})]})}function i(e){let{gameStatus:t}=e;return t?(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded px-2 py-1",children:[(0,r.jsx)("div",{className:"text-white text-xs",children:(0,r.jsxs)("span",{className:"font-semibold",children:["Round ",t.roundNumber]})}),(0,r.jsxs)("div",{className:"text-white/80 text-xs",children:["Deck: ",t.deckSize," | Discard: ",t.discardSize]})]}):null}function o(e){let{playedWord:t,playerName:s,isSelected:a=!1,isExtendMode:n=!1,onClick:d}=e;return(0,r.jsxs)("div",{className:"\n        bg-white/20 backdrop-blur-sm rounded-lg p-2 cursor-pointer transition-all duration-200\n        ".concat(n?"animate-waddle hover:bg-white/30":"","\n        ").concat(a?"ring-2 ring-indigo-400 bg-indigo-500/30 shadow-lg":"","\n        ").concat(d?"hover:scale-105":"","\n      "),onClick:d,children:[(0,r.jsx)("div",{className:"flex gap-1 mb-1",children:t.cards.map(e=>(0,r.jsx)(l.A,{card:e,size:"sm"},e.id))}),(0,r.jsx)("p",{className:"text-white font-semibold text-center text-sm",children:t.word}),(0,r.jsxs)("p",{className:"text-white/60 text-xs text-center",children:["by ",s]})]})}function c(e){let{playedWords:t,players:s,gameStatus:a,isExtendMode:n=!1,selectedWordId:l=null,onWordSelect:d}=e;return(0,r.jsxs)("div",{className:"flex-1 bg-white/5 backdrop-blur-sm rounded-lg p-4 min-h-0 overflow-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsx)("h4",{className:"text-white/80 text-xs",children:"Playing Field"}),(0,r.jsx)(i,{gameStatus:a})]}),0===t.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("p",{className:"text-white/60 text-center text-sm",children:["No words played yet.",(0,r.jsx)("br",{}),"Start by playing a word from your hand!"]})}):(0,r.jsx)("div",{className:"flex flex-wrap gap-3",children:t.map(e=>{var t;let a=(null==(t=s.find(t=>t.id===e.playerId))?void 0:t.name)||"Unknown Player";return(0,r.jsx)(o,{playedWord:e,playerName:a,isSelected:l===e.id,isExtendMode:n,onClick:n?()=>null==d?void 0:d(e.id):void 0},e.id)})})]})}function m(e){let{deckSize:t,discardPile:s,tempDiscardedCard:a,selectedCardsCount:n,onPlayWord:d,onExtendWord:i,onCancelExtend:o,onDiscard:c,onDraw:m,onDrawFromDiscard:u,isCurrentTurn:h=!0,gamePhase:x="playing",hasDiscardedThisTurn:p=!1,hasPlayedWords:g=!1,isExtendMode:f=!1}=e;return console.log("DeckAndControls - selectedCardsCount:",n),(0,r.jsxs)("div",{className:"h-full bg-white/10 backdrop-blur-sm rounded-lg p-2 flex flex-col justify-between border border-white/20",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-8 h-12 border-2 rounded-lg flex items-center justify-center mb-1 ".concat(t>0?"bg-blue-800 border-blue-600":"bg-gray-600 border-gray-500"),children:(0,r.jsx)("span",{className:"text-white text-xs",children:"\uD83C\uDCA0"})}),(0,r.jsxs)("p",{className:"text-white/80 text-xs",children:["Deck (",t,")"]})]}),(0,r.jsxs)("div",{className:"text-center",children:[s.length>0&&(0,r.jsx)(l.A,{card:s[s.length-1],size:"sm"}),(0,r.jsx)("p",{className:"text-white/80 text-xs mt-1",children:"Discard"})]}),a&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(l.A,{card:a,size:"sm"}),(0,r.jsx)("p",{className:"text-white/80 text-xs mt-1",children:"Just Discarded"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("button",{onClick:d,disabled:0===n||!h||"playing"!==x,className:"w-full px-2 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-semibold",children:"Play Word"}),f?(0,r.jsx)("button",{onClick:o,className:"w-full px-2 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors text-sm",children:"Cancel Extend"}):(0,r.jsx)("button",{onClick:i,disabled:!h||"playing"!==x||!g,className:"w-full px-2 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"Extend Word"}),(0,r.jsx)("button",{onClick:c,disabled:1!==n||!h||"playing"!==x,className:"w-full px-2 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"Discard"}),p&&h&&"playing"===x?(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("button",{onClick:m,disabled:0===t,className:"w-full px-2 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:["Draw from Deck ",t>0?"(".concat(t,")"):"(Empty)"]}),(0,r.jsxs)("button",{onClick:u,disabled:s.length<1,className:"w-full px-2 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:["Draw from Discard ",s.length>=1?"(Top Card)":"(Empty)"]})]}):(0,r.jsxs)("button",{onClick:m,disabled:0===t||!h||"playing"!==x||!p,className:"w-full px-2 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:["Draw ",t>0?"(".concat(t,")"):"(Empty)",!p&&h&&"playing"===x&&t>0&&(0,r.jsx)("span",{className:"block text-xs opacity-75",children:"(Discard first)"})]})]})]})}let u=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function h(e){let{isOpen:t,masterCard:s,onClose:n,onAssignLetter:l}=e,[d,i]=(0,a.useState)("");(0,a.useEffect)(()=>{t&&i("")},[t]);let o=e=>{i(e)},c=()=>{d&&s&&(l(s.id,d),n())},m=e=>{let t=e.key.toUpperCase();u.includes(t)?i(t):"Enter"===e.key&&d?c():"Escape"===e.key&&n()};return t&&s?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Assign Letter to Master Card"}),(0,r.jsx)("div",{className:"mb-6 flex justify-center",children:(0,r.jsxs)("div",{className:"w-16 h-20 bg-gradient-to-br from-purple-400 to-purple-600 border-2 border-purple-500 rounded-lg flex flex-col items-center justify-center text-white font-bold shadow-lg",children:[(0,r.jsx)("div",{className:"text-center leading-none",children:"â˜…"}),(0,r.jsx)("div",{className:"text-xs opacity-80 mt-1",children:s.points}),(0,r.jsx)("div",{className:"text-[10px] opacity-60 mt-1 leading-none",children:"MASTER"})]})}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Choose a letter to assign:"}),(0,r.jsx)("div",{className:"grid grid-cols-9 gap-2 max-h-48 overflow-y-auto",children:u.map(e=>(0,r.jsx)("button",{onClick:()=>o(e),onKeyDown:m,className:"w-8 h-8 border-2 rounded-md font-bold text-sm transition-colors ".concat(d===e?"bg-purple-600 border-purple-700 text-white":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"),children:e},e))})]}),(0,r.jsx)("div",{className:"mb-6 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,r.jsxs)("p",{className:"text-blue-700 text-sm",children:[(0,r.jsx)("strong",{children:"Note:"}),' Once assigned, this master card will always represent the letter "',d||"?",'" for the rest of the game.']})}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{onClick:n,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:c,disabled:!d,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Assign Letter"})]})]})}):null}function x(e){let{gameState:t,onEndTurn:s,onStartGame:a,onNewGame:l}=e,d=(0,n.PL)(t),i=(()=>{switch(t.gamePhase){case"lobby":return{text:"Game Lobby",color:"bg-blue-600",action:"Start Game"};case"playing":return{text:"Game in Progress",color:"bg-green-600",action:"End Turn"};case"roundEnd":return{text:"Round Ended",color:"bg-yellow-600",action:"Next Round"};case"gameOver":return{text:"Game Over",color:"bg-red-600",action:"New Game"};default:return{text:"Unknown",color:"bg-gray-600",action:""}}})(),o=()=>{switch(t.gamePhase){case"lobby":null==a||a();break;case"playing":null==s||s();break;case"gameOver":null==l||l()}};if("gameOver"===t.gamePhase){let e=t.players.find(e=>e.id===t.winner);return(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-white font-bold text-lg mb-2",children:"Game Over!"}),e&&(0,r.jsxs)("p",{className:"text-white/80 mb-3",children:["Winner: ",(0,r.jsx)("span",{className:"font-semibold text-yellow-400",children:e.name})]}),(0,r.jsx)("div",{className:"space-y-2",children:t.players.map(e=>(0,r.jsxs)("div",{className:"flex justify-between text-white/70 text-sm",children:[(0,r.jsx)("span",{children:e.name}),(0,r.jsxs)("span",{className:"font-semibold",children:[e.score," points"]})]},e.id))}),(0,r.jsx)("button",{onClick:o,className:"mt-4 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"New Game"})]})})}return(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/20",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(i.color)}),(0,r.jsx)("span",{className:"text-white/80 text-sm font-medium",children:i.text})]}),(0,r.jsxs)("span",{className:"text-white/60 text-xs",children:["Round ",t.roundNumber]})]}),"playing"===t.gamePhase&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-white/70 text-sm",children:"Current Turn:"}),(0,r.jsx)("span",{className:"text-white font-semibold",children:d.name})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-white/70 text-sm",children:"Cards in Hand:"}),(0,r.jsx)("span",{className:"text-white font-semibold",children:d.hand.length})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-white/70 text-sm",children:"Score:"}),(0,r.jsx)("span",{className:"text-white font-semibold",children:d.score})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-white/70 text-sm",children:"Discard Status:"}),(0,r.jsx)("span",{className:"font-semibold ".concat(d.hasDiscardedThisTurn?"text-green-400":"text-red-400"),children:d.hasDiscardedThisTurn?"âœ“ Discarded":"âœ— Not Discarded"})]}),(0,r.jsx)("button",{onClick:o,className:"w-full mt-2 px-3 py-1.5 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition-colors text-sm font-medium",children:"End Turn"})]}),"lobby"===t.gamePhase&&(0,r.jsx)("button",{onClick:o,className:"w-full px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium",children:"Start Game"})]})}function p(e){let{isOpen:t,selectedCards:s,wordToExtend:d,onClose:i,onConfirm:o}=e,[c,m]=(0,a.useState)(""),[u,h]=(0,a.useState)("");(0,a.useEffect)(()=>{t&&d&&(m(d.word),h(""))},[t,d]);let x=e=>{m(e.toUpperCase()),h("")},p=()=>{if(!d)return;if(!(0,n.Ln)(c))return void h("Word must be at least 2 letters long and contain only letters.");let e=s.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter);return(0,n.y9)(d.word,e,c)?c===d.word?void h("New word must be different from the original word."):void o(c):void h('New word cannot be formed by inserting the selected letters into "'.concat(d.word,'".'))};return t&&d?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Extend Word"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Original Word:"}),(0,r.jsx)("div",{className:"flex gap-1 mb-2",children:d.cards.map(e=>(0,r.jsx)(l.A,{card:e,size:"sm"},e.id))}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:d.word})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Cards to Add:"}),(0,r.jsx)("div",{className:"flex gap-1 mb-2",children:s.map(e=>(0,r.jsx)(l.A,{card:e,size:"sm"},e.id))}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Letters: ",s.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter).join("")]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Extended Word:"}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mb-2",children:["\uD83D\uDCA1 ",(0,r.jsx)("strong",{children:"Tip:"})," The original word is pre-filled. Click anywhere in the word to position your cursor, then type your new letters."]}),(0,r.jsx)("input",{type:"text",value:c,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key?p():"Escape"===e.key&&i()},placeholder:"Click to position cursor and type your new letters",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",autoFocus:!0})]}),u&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsx)("p",{className:"text-red-600 text-sm",children:u})}),c&&!u&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:[(0,r.jsxs)("p",{className:"text-green-700 text-sm",children:[(0,r.jsx)("strong",{children:"Preview:"})," ",c]}),(0,r.jsxs)("p",{className:"text-green-600 text-xs",children:["Length: ",c.length," letters"]})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{onClick:i,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:p,disabled:!c.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Extend Word"})]})]})}):null}function g(e){let{gameState:t,onCardSelect:s,onPlayWord:l,onDiscard:i,onDraw:o,onGameStateUpdate:u}=e,[g,f]=(0,a.useState)(new Set),[y,b]=(0,a.useState)(!1),[w,j]=(0,a.useState)({isOpen:!1,card:null}),[N,v]=(0,a.useState)({isOpen:!1,wordToExtend:null}),[C,k]=(0,a.useState)(!1),[T,D]=(0,a.useState)(null),[P,S]=(0,a.useState)(null),E=(0,n.PL)(t),L=(0,a.useCallback)(e=>{let r=function(e,t,s){let r=(0,n.PL)(s);if(!r.isCurrentTurn||"playing"!==s.gamePhase)return{newSelectedCards:t,shakeHand:!1};let a=e.key.toUpperCase();if("Backspace"===e.key){if(t.size>0){let e=Array.from(t).map(e=>r.hand.find(t=>t.id===e)),s=e[e.length-1],a=new Set(t);return a.delete(s.id),console.log("Last card deselected via backspace:",s.letter,"Selected cards:",Array.from(a)),{newSelectedCards:a,shakeHand:!1,deselectedCard:s}}return{newSelectedCards:t,shakeHand:!1}}let l=r.hand.find(e=>e.letter===a||e.isMaster&&e.assignedLetter===a);if(!l)return console.log("Invalid key pressed:",a,"No matching card found"),{newSelectedCards:t,shakeHand:!0};{let e=new Set(t);return e.has(l.id)?(e.delete(l.id),console.log("Card deselected via keyboard:",l.letter,"Selected cards:",Array.from(e)),{newSelectedCards:e,shakeHand:!1,deselectedCard:l}):(e.add(l.id),console.log("Card selected via keyboard:",l.letter,"Selected cards:",Array.from(e)),{newSelectedCards:e,shakeHand:!1,selectedCard:l})}}(e,g,t);f(r.newSelectedCards),r.shakeHand&&(b(!0),setTimeout(()=>b(!1),500)),r.selectedCard?null==s||s(r.selectedCard,E.id):r.deselectedCard&&(null==s||s(r.deselectedCard,E.id))},[g,t,s,E.id]);(0,a.useEffect)(()=>(window.addEventListener("keydown",L),()=>{window.removeEventListener("keydown",L)}),[g,E,L]);let A={roundNumber:t.roundNumber,currentPlayerName:E.name,deckSize:t.deck.length,discardSize:t.discardPile.length},M=async()=>{if("playing"!==t.gamePhase||!E.isCurrentTurn||0===g.size)return;let e=Array.from(g).map(e=>E.hand.find(t=>t.id===e)),s=e.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter).join("");if(!(0,n.Ln)(s)){S({message:"Word must be at least 2 letters long",type:"error"}),setTimeout(()=>S(null),2e3);return}S({message:"Checking word validity...",type:"success"});let r=await (0,n.AT)(t,E.id,e,s);r.success?(null==u||u(r.gameState),null==l||l(),f(new Set),S({message:'Word "'.concat(s,'" played successfully!'),type:"success"}),setTimeout(()=>S(null),3e3)):(S({message:r.error||"Failed to play word",type:"error"}),setTimeout(()=>S(null),4e3))},W=async e=>{if(!N.wordToExtend)return;let s=Array.from(g).map(e=>E.hand.find(t=>t.id===e));S({message:"Checking word validity...",type:"success"});let r=await (0,n.GP)(t,E.id,N.wordToExtend.id,s,e);r.success?(null==u||u(r.gameState),v({isOpen:!1,wordToExtend:null}),f(new Set),S({message:'Extended word to: "'.concat(e,'"!'),type:"success"}),setTimeout(()=>S(null),3e3)):(S({message:r.error||"Failed to extend word",type:"error"}),setTimeout(()=>S(null),4e3))},O=()=>{k(!1),D(null)};return(0,r.jsxs)("div",{className:"w-full h-full bg-gradient-to-br from-green-800 to-green-600 p-2 min-h-0 overflow-hidden relative",children:[(0,r.jsx)("div",{className:"h-28 flex-shrink-0",children:(0,r.jsx)(d,{player:t.players[1],isCurrentPlayer:!1,isOpponent:!0})}),(0,r.jsxs)("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[(0,r.jsx)("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:(0,r.jsx)(c,{playedWords:t.playedWords,players:t.players,gameStatus:A,isExtendMode:C,selectedWordId:T,onWordSelect:e=>{if(!C)return;let s=t.playedWords.find(t=>t.id===e);s&&(D(e),v({isOpen:!0,wordToExtend:s}),k(!1))}})}),(0,r.jsxs)("div",{className:"w-64 ml-2 flex-shrink-0 flex flex-col gap-2",children:[(0,r.jsx)(x,{gameState:t,onEndTurn:()=>{let e=(0,n.xw)(t);null==u||u(e),f(new Set);let s=(0,n.PL)(e);S({message:"Turn ended. ".concat(s.name,"'s turn now."),type:"success"}),setTimeout(()=>S(null),2e3),console.log("Turn ended")},onStartGame:()=>{let e=(0,n.zj)([t.players[0].name,t.players[1].name]);null==u||u(e),S({message:"Game started!",type:"success"}),setTimeout(()=>S(null),2e3),console.log("Game started")},onNewGame:()=>{let e={...t,gamePhase:"lobby",winner:null,playedWords:[],roundNumber:1};null==u||u(e),S({message:"New game ready!",type:"success"}),setTimeout(()=>S(null),2e3),console.log("New game prepared")}}),(0,r.jsx)(m,{deckSize:t.deck.length,discardPile:t.discardPile,tempDiscardedCard:t.tempDiscardedCard,selectedCardsCount:g.size,onPlayWord:M,onExtendWord:()=>{if("playing"===t.gamePhase&&E.isCurrentTurn){if(0===t.playedWords.length){S({message:"No words on the board to extend",type:"error"}),setTimeout(()=>S(null),2e3);return}k(!0),D(null),S({message:"Click on a word to extend it",type:"success"}),setTimeout(()=>S(null),3e3)}},onCancelExtend:O,onDiscard:()=>{if("playing"!==t.gamePhase||!E.isCurrentTurn||1!==g.size)return;let e=Array.from(g)[0],s=E.hand.find(t=>t.id===e);if(!s)return;let r=(0,n.Ds)(t,E.id,s);null==u||u(r),null==i||i(),f(new Set),S({message:"Discarded: ".concat(s.letter,". You can now draw a card."),type:"success"}),setTimeout(()=>S(null),3e3),console.log("Card discarded: ".concat(s.letter))},onDraw:()=>{if("playing"!==t.gamePhase||!E.isCurrentTurn)return;if(!E.hasDiscardedThisTurn){S({message:"Must discard a card before drawing",type:"error"}),setTimeout(()=>S(null),2e3),console.log("Cannot draw: must discard first");return}if(0===t.deck.length){S({message:"Cannot draw: deck is empty",type:"error"}),setTimeout(()=>S(null),2e3),console.log("Cannot draw: deck is empty");return}let e=(0,n.Fy)(t,E.id);null==u||u(e),null==o||o(),S({message:"Card drawn from deck",type:"success"}),setTimeout(()=>S(null),2e3),console.log("Card drawn from deck")},onDrawFromDiscard:()=>{if("playing"!==t.gamePhase||!E.isCurrentTurn)return;if(!E.hasDiscardedThisTurn){S({message:"Must discard a card before drawing",type:"error"}),setTimeout(()=>S(null),2e3),console.log("Cannot draw from discard: must discard first");return}if(t.discardPile.length<1){S({message:"Cannot draw from discard: discard pile is empty",type:"error"}),setTimeout(()=>S(null),2e3),console.log("Cannot draw from discard: discard pile is empty");return}let e=(0,n.ph)(t,E.id);null==u||u(e),null==o||o(),S({message:"Card drawn from discard pile",type:"success"}),setTimeout(()=>S(null),2e3),console.log("Card drawn from discard pile")},isCurrentTurn:E.isCurrentTurn,gamePhase:t.gamePhase,hasDiscardedThisTurn:E.hasDiscardedThisTurn,hasPlayedWords:t.playedWords.length>0,isExtendMode:C})]})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-52 bg-gradient-to-br from-green-800 to-green-600",children:(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(d,{player:t.players[0],isCurrentPlayer:!0,selectedCards:g,onCardClick:(e,r)=>{if(r===E.id&&"playing"===t.gamePhase){if(e.isMaster&&!e.assignedLetter)return void j({isOpen:!0,card:e});let t=new Set(g);t.has(e.id)?t.delete(e.id):t.add(e.id),f(t),console.log("Card clicked:",e.letter,"Selected cards:",Array.from(t)),null==s||s(e,r)}},shakeHand:y})})}),(0,r.jsx)(h,{isOpen:w.isOpen,masterCard:w.card,onClose:()=>j({isOpen:!1,card:null}),onAssignLetter:(e,s)=>{let r={...t,players:t.players.map(t=>({...t,hand:t.hand.map(t=>t.id===e?{...t,assignedLetter:s}:t)}))};null==u||u(r),j({isOpen:!1,card:null}),console.log("Master card ".concat(e," assigned letter: ").concat(s))}}),(0,r.jsx)(p,{isOpen:N.isOpen,selectedCards:Array.from(g).map(e=>E.hand.find(t=>t.id===e)),wordToExtend:N.wordToExtend,onClose:()=>{v({isOpen:!1,wordToExtend:null}),O()},onConfirm:W}),P&&(0,r.jsx)("div",{className:"fixed top-4 right-4 px-4 py-2 rounded-md text-white text-sm font-medium z-50 transition-all duration-300 ".concat("success"===P.type?"bg-green-600":"bg-red-600"),children:P.message})]})}},4698:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(5155),a=s(1934);function n(e){let{card:t,isSelected:s=!1,isPlayable:n=!0,isFaceDown:l=!1,onClick:d,className:i="",size:o="md"}=e,c="\n    ".concat({sm:"w-10 h-14 text-xs",md:"w-12 h-16 text-sm",lg:"w-16 h-20 text-base"}[o],"\n    border-2 rounded-lg flex flex-col items-center justify-center font-bold cursor-pointer\n    transition-all duration-200 select-none\n    ").concat(l?"bg-gray-800 border-gray-600":"","\n    ").concat(!l&&!n?"opacity-50 cursor-not-allowed":"","\n    ").concat(i,"\n  "),m=l?"bg-gray-800 border-gray-600 text-gray-300":t.isMaster?"bg-gradient-to-br from-purple-400 to-purple-600 border-purple-500 text-white shadow-lg":"bg-gradient-to-br from-blue-400 to-blue-600 border-blue-500 text-white shadow-md";return(0,r.jsx)(a.P.div,{className:"".concat(c," ").concat(m," ").concat(s?"ring-4 ring-yellow-400 ring-opacity-75 scale-110 shadow-xl":"hover:scale-105 hover:shadow-lg"),onClick:()=>{d&&n&&!l&&d()},whileHover:n&&!l?{scale:1.05}:{},whileTap:n&&!l?{scale:.95}:{},animate:{scale:s?1.1:1,rotateY:180*!!l},transition:{duration:.2},children:l?(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,r.jsx)("div",{className:"text-gray-400 text-xs",children:"\uD83C\uDCA0"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-center leading-none",children:t.isMaster?t.assignedLetter?t.assignedLetter:"â˜…":t.letter}),(0,r.jsx)("div",{className:"text-xs opacity-80 mt-1",children:t.points}),t.isMaster&&(0,r.jsx)("div",{className:"text-[10px] opacity-60 mt-1 leading-none",children:t.assignedLetter?"MASTER":"ASSIGN"})]})})}}}]);