exports.id=252,exports.ids=[252],exports.modules={440:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(1658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},1135:()=>{},1304:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},2078:(e,s,r)=>{"use strict";r.d(s,{y9:()=>l,Ds:()=>m,Fy:()=>u,ph:()=>h,xw:()=>x,GP:()=>f,PL:()=>o,VI:()=>i,Ln:()=>n,AT:()=>c,zj:()=>p});let t={A:10,E:10,I:10,O:8,U:8,H:8,L:8,R:8,S:8,T:8,W:8,C:8,K:8,M:8,N:8,P:8,D:6,J:6,V:6,G:4,Q:4,Y:4,B:2,F:2,X:2,Z:2,MASTER:15},a={A:4,E:4,I:4,O:3,U:3,H:3,L:3,R:3,S:3,T:3,W:3,C:1,K:1,M:1,N:1,P:1,D:1,J:1,V:1,G:1,Q:1,Y:1,B:1,F:1,X:1,Z:1,MASTER:1};function n(e){return e.length>=2&&/^[A-Z]+$/.test(e)}async function d(e){let{isValidDictionaryWordCached:s}=await r.e(813).then(r.bind(r,1813));return s(e)}function l(e,s,r){if(r.length!==e.length+s.length)return!1;let t=new Map,a=new Map,n=new Map;for(let s of e)t.set(s,(t.get(s)||0)+1);for(let e of s)a.set(e,(a.get(e)||0)+1);for(let e of r)n.set(e,(n.get(e)||0)+1);for(let[e,s]of n)if(s!==(t.get(e)||0)+(a.get(e)||0))return!1;for(let[e,s]of t)if((n.get(e)||0)<s)return!1;for(let[e,s]of a)if((n.get(e)||0)<s)return!1;return!0}function i(e){let s=function(e){let s=[...e];for(let e=s.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[s[e],s[r]]=[s[r],s[e]]}return s}(function(){let e=[],s=0;Object.entries(a).forEach(([r,a])=>{for(let n=0;n<a;n++)e.push({id:`card_${s++}`,letter:r,points:t[r],isMaster:"MASTER"===r})});let r=Object.values(a).reduce((e,s)=>e+s,0);if(e.length!==r)throw Error(`Deck creation error: Expected ${r} cards, got ${e.length}`);return console.log(`Deck created with ${e.length} cards`),e}()),{updatedPlayers:r,remainingDeck:n,discardPile:d}=function(e,s,r=10){let t=e.map(e=>({...e,hand:[]})),a=[...s];console.log(`Dealing ${r} cards to ${e.length} players from deck of ${s.length} cards`);for(let e=0;e<r;e++)for(let s=0;s<t.length;s++)if(a.length>0){let e=a.pop();t[s].hand=[...t[s].hand,e]}else{console.warn(`Deck ran out during dealing! Round ${e}, Player ${s}`);break}let n=!1;if(t.forEach((e,s)=>{e.hand.length!==r&&(console.error(`ERROR: Player ${s} (${e.name}) has ${e.hand.length} cards instead of ${r}!`),console.error("Player hand:",e.hand.map(e=>e.letter)),n=!0)}),n)throw Error(`Card dealing error: Players have wrong number of cards. Expected ${r} each.`);let d=[];return console.log(`Dealing complete. Remaining deck: ${a.length} cards, Discard pile: ${d.length} cards`),{updatedPlayers:t,remainingDeck:a,discardPile:d}}(e.map((e,s)=>({id:`player_${s}`,name:e,hand:[],score:0,isCurrentTurn:0===s,hasDiscardedThisTurn:!1})),s),l={players:r,currentPlayerIndex:0,deck:n,discardPile:d,tempDiscardedCard:null,playedWords:[],gamePhase:"lobby",roundNumber:1,winner:null},i=g(l);return i.isValid||console.error("Game state validation failed after initialization:",i.errors),l}function o(e){return e.players[e.currentPlayerIndex]}async function c(e,s,r,t){let a=e.players.findIndex(e=>e.id===s);if(-1===a)return{success:!1,gameState:e,error:"Player not found"};if(!await d(t))return{success:!1,gameState:e,error:`"${t}" is not a valid word. Please try a different word.`};let n=[...e.players],l={...n[a]},i=new Set(r.map(e=>e.id));l.hand=l.hand.filter(e=>!i.has(e.id));let o=r.reduce((e,s)=>e+s.points,0);l.score+=o,n[a]=l;let c=r.map(e=>({...e,letter:e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter})),m={id:`word_${Date.now()}`,word:t,cards:c,playerId:s,playerName:l.name,score:o,timestamp:Date.now(),position:{x:0,y:0}};return{success:!0,gameState:x({...e,players:n,playedWords:[...e.playedWords,m]})}}function m(e,s,r){let t=e.players.findIndex(e=>e.id===s);if(-1===t)return e;let a=[...e.players],n={...a[t]};return n.hand=n.hand.filter(e=>e.id!==r.id),n.hasDiscardedThisTurn=!0,a[t]=n,{...e,players:a,tempDiscardedCard:r}}function u(e,s){let r=e.players.findIndex(e=>e.id===s);if(-1===r)return e;let t=e.players[r];if(!t.hasDiscardedThisTurn)return console.log("Cannot draw: must discard a card first"),e;if(0===e.deck.length)return console.log("Cannot draw: deck is empty"),e;if(t.hand.length>=10)return console.error(`Player ${t.name} already has ${t.hand.length} cards, cannot draw more`),e;let a=[...e.deck],n=a.pop(),d=[...e.players],l={...d[r]};l.hand=[...l.hand,n],d[r]=l;let i=[...e.discardPile];e.tempDiscardedCard&&i.push(e.tempDiscardedCard);let o={...e,players:d,deck:a,discardPile:i,tempDiscardedCard:null},c=g(o);return c.isValid||console.error("Game state validation failed after drawing card:",c.errors),x(o)}function h(e,s){let r=e.players.findIndex(e=>e.id===s);if(-1===r)return e;let t=e.players[r];if(!t.hasDiscardedThisTurn)return console.log("Cannot draw from discard: must discard a card first"),e;if(e.discardPile.length<1)return console.log("Cannot draw from discard: discard pile is empty"),e;if(t.hand.length>=10)return console.error(`Player ${t.name} already has ${t.hand.length} cards, cannot draw more`),e;let a=[...e.discardPile],n=a.pop(),d=[...e.players],l={...d[r]};l.hand=[...l.hand,n],d[r]=l;let i=[...a];e.tempDiscardedCard&&i.push(e.tempDiscardedCard);let o={...e,players:d,discardPile:i,tempDiscardedCard:null},c=g(o);return c.isValid||console.error("Game state validation failed after drawing from discard:",c.errors),x(o)}function x(e){let s=function(e){let s=e.players.find(e=>0===e.hand.length);return s?s.id:null}(e);if(s)return{...e,gamePhase:"gameOver",winner:s};let r=(e.currentPlayerIndex+1)%e.players.length;return{...e,currentPlayerIndex:r,players:e.players.map((e,s)=>({...e,isCurrentTurn:s===r,hasDiscardedThisTurn:!1}))}}function p(e){return{...i(e),gamePhase:"playing"}}function g(e){let s=[];e.players.forEach((e,r)=>{e.hand.length>10&&s.push(`Player ${r} (${e.name}) has ${e.hand.length} cards (should be ≤10)`)});let r=e.players.reduce((e,s)=>e+s.hand.length,0),t=e.playedWords.reduce((e,s)=>e+s.cards.length,0),n=e.discardPile.length,d=e.deck.length,l=+!!e.tempDiscardedCard,i=r+t+n+d+l,o=Object.values(a).reduce((e,s)=>e+s,0);return i!==o&&(s.push(`Total cards in game (${i}) doesn't match expected total (${o})`),s.push(`Breakdown: Hands=${r}, Played=${t}, Discard=${n}, Deck=${d}, Temp=${l}`)),{isValid:0===s.length,errors:s}}async function f(e,s,r,t,a){let n=e.players.findIndex(e=>e.id===s);if(-1===n)return{success:!1,gameState:e,error:"Player not found"};let i=e.playedWords.find(e=>e.id===r);if(!i)return{success:!1,gameState:e,error:"Word not found for extension"};let o=t.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter);if(!l(i.word,o,a))return{success:!1,gameState:e,error:"New word cannot be formed by inserting the selected cards into the original word"};if(!await d(a))return{success:!1,gameState:e,error:`"${a}" is not a valid word. Please try a different word.`};let c=[...e.players],m={...c[n]},u=new Set(t.map(e=>e.id));m.hand=m.hand.filter(e=>!u.has(e.id));let h=t.reduce((e,s)=>e+s.points,0);m.score+=h,c[n]=m;let p=t.map(e=>({...e,letter:e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter})),g=function(e,s,r){let t=e.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter),a=s.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter),n=[],d=0,l=0;for(let i=0;i<r.length;i++){let o=r[i];if(d<t.length&&o===t[d])n.push(e[d]),d++;else if(l<a.length&&o===a[l])n.push(s[l]),l++;else{let e=a.findIndex((e,s)=>s>=l&&e===o);-1!==e&&(n.push(s[e]),l=e+1)}}return n}(i.cards,p,a),f={id:`word_${Date.now()}`,word:a,cards:g,playerId:s,playerName:m.name,score:h,timestamp:Date.now(),position:i.position},b=e.playedWords.filter(e=>e.id!==r);return b.push(f),{success:!0,gameState:x({...e,players:c,playedWords:b})}}},3024:()=>{},3296:()=>{},3915:(e,s,r)=>{"use strict";r.d(s,{A:()=>g});var t=r(687),a=r(3210),n=r(2078),d=r(6634);function l({player:e,isCurrentPlayer:s,isOpponent:r=!1,selectedCards:a=new Set,onCardClick:n,shakeHand:l=!1}){let i=Array.from(a).map(s=>e.hand.find(e=>e.id===s)).filter(e=>void 0!==e);return(0,t.jsxs)("div",{className:`h-full flex flex-col overflow-hidden relative ${e.isCurrentTurn?"ring-2 ring-yellow-400 ring-opacity-75":""}`,children:[(0,t.jsxs)("div",{className:`flex-1 bg-white/5 backdrop-blur-sm rounded-lg p-2 mb-1 overflow-hidden ${l?"animate-shake":""}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h4",{className:"text-white/80 text-xs",children:r?"Opponent's Hand":"Your Hand"}),(0,t.jsxs)("span",{className:"text-white/60 text-xs",children:["(",e.hand.length,")"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-white/80 text-xs",children:["Score: ",e.score]}),e.isCurrentTurn&&(0,t.jsx)("span",{className:"bg-yellow-500 text-black text-xs px-2 py-0.5 rounded-full font-semibold",children:"TURN"})]})]}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap overflow-hidden p-4",children:e.hand.map(s=>(0,t.jsx)(d.A,{card:s,isSelected:a.has(s.id),isFaceDown:r,onClick:()=>n?.(s,e.id),size:r?"sm":"md"},s.id))})]}),s&&i.length>0&&(0,t.jsxs)("div",{className:"absolute bottom-1 right-1 bg-white/10 backdrop-blur-sm rounded px-1 py-0.5 border border-white/20",children:[(0,t.jsx)("div",{className:"flex gap-0.5 justify-center",children:i.map(e=>(0,t.jsx)(d.A,{card:e,size:"sm"},e.id))}),(0,t.jsx)("p",{className:"text-white font-semibold text-center text-xs",children:i.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter).join("")})]})]})}function i({gameStatus:e}){return e?(0,t.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded px-2 py-1",children:[(0,t.jsx)("div",{className:"text-white text-xs",children:(0,t.jsxs)("span",{className:"font-semibold",children:["Round ",e.roundNumber]})}),(0,t.jsxs)("div",{className:"text-white/80 text-xs",children:["Deck: ",e.deckSize," | Discard: ",e.discardSize]})]}):null}function o({playedWord:e,playerName:s,isSelected:r=!1,isExtendMode:a=!1,onClick:n}){return(0,t.jsxs)("div",{className:`
        bg-white/20 backdrop-blur-sm rounded-lg p-2 cursor-pointer transition-all duration-200
        ${a?"animate-waddle hover:bg-white/30":""}
        ${r?"ring-2 ring-indigo-400 bg-indigo-500/30 shadow-lg":""}
        ${n?"hover:scale-105":""}
      `,onClick:n,children:[(0,t.jsx)("div",{className:"flex gap-1 mb-1",children:e.cards.map(e=>(0,t.jsx)(d.A,{card:e,size:"sm"},e.id))}),(0,t.jsx)("p",{className:"text-white font-semibold text-center text-sm",children:e.word}),(0,t.jsxs)("p",{className:"text-white/60 text-xs text-center",children:["by ",s]})]})}function c({playedWords:e,players:s,gameStatus:r,isExtendMode:a=!1,selectedWordId:n=null,onWordSelect:d}){return(0,t.jsxs)("div",{className:"flex-1 bg-white/5 backdrop-blur-sm rounded-lg p-4 min-h-0 overflow-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsx)("h4",{className:"text-white/80 text-xs",children:"Playing Field"}),(0,t.jsx)(i,{gameStatus:r})]}),0===e.length?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsxs)("p",{className:"text-white/60 text-center text-sm",children:["No words played yet.",(0,t.jsx)("br",{}),"Start by playing a word from your hand!"]})}):(0,t.jsx)("div",{className:"flex flex-wrap gap-3",children:e.map(e=>{let r=s.find(s=>s.id===e.playerId)?.name||"Unknown Player";return(0,t.jsx)(o,{playedWord:e,playerName:r,isSelected:n===e.id,isExtendMode:a,onClick:a?()=>d?.(e.id):void 0},e.id)})})]})}function m({deckSize:e,discardPile:s,tempDiscardedCard:r,selectedCardsCount:a,onPlayWord:n,onExtendWord:l,onCancelExtend:i,onDiscard:o,onDraw:c,onDrawFromDiscard:m,isCurrentTurn:u=!0,gamePhase:h="playing",hasDiscardedThisTurn:x=!1,hasPlayedWords:p=!1,isExtendMode:g=!1}){return console.log("DeckAndControls - selectedCardsCount:",a),(0,t.jsxs)("div",{className:"h-full bg-white/10 backdrop-blur-sm rounded-lg p-2 flex flex-col justify-between border border-white/20",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:`w-8 h-12 border-2 rounded-lg flex items-center justify-center mb-1 ${e>0?"bg-blue-800 border-blue-600":"bg-gray-600 border-gray-500"}`,children:(0,t.jsx)("span",{className:"text-white text-xs",children:"\uD83C\uDCA0"})}),(0,t.jsxs)("p",{className:"text-white/80 text-xs",children:["Deck (",e,")"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[s.length>0&&(0,t.jsx)(d.A,{card:s[s.length-1],size:"sm"}),(0,t.jsx)("p",{className:"text-white/80 text-xs mt-1",children:"Discard"})]}),r&&(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(d.A,{card:r,size:"sm"}),(0,t.jsx)("p",{className:"text-white/80 text-xs mt-1",children:"Just Discarded"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("button",{onClick:n,disabled:0===a||!u||"playing"!==h,className:"w-full px-2 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-semibold",children:"Play Word"}),g?(0,t.jsx)("button",{onClick:i,className:"w-full px-2 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors text-sm",children:"Cancel Extend"}):(0,t.jsx)("button",{onClick:l,disabled:!u||"playing"!==h||!p,className:"w-full px-2 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"Extend Word"}),(0,t.jsx)("button",{onClick:o,disabled:1!==a||!u||"playing"!==h,className:"w-full px-2 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:"Discard"}),x&&u&&"playing"===h?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("button",{onClick:c,disabled:0===e,className:"w-full px-2 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:["Draw from Deck ",e>0?`(${e})`:"(Empty)"]}),(0,t.jsxs)("button",{onClick:m,disabled:s.length<1,className:"w-full px-2 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:["Draw from Discard ",s.length>=1?"(Top Card)":"(Empty)"]})]}):(0,t.jsxs)("button",{onClick:c,disabled:0===e||!u||"playing"!==h||!x,className:"w-full px-2 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:["Draw ",e>0?`(${e})`:"(Empty)",!x&&u&&"playing"===h&&e>0&&(0,t.jsx)("span",{className:"block text-xs opacity-75",children:"(Discard first)"})]})]})]})}let u=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function h({isOpen:e,masterCard:s,onClose:r,onAssignLetter:n}){let[d,l]=(0,a.useState)(""),i=e=>{l(e)},o=()=>{d&&s&&(n(s.id,d),r())},c=e=>{let s=e.key.toUpperCase();u.includes(s)?l(s):"Enter"===e.key&&d?o():"Escape"===e.key&&r()};return e&&s?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Assign Letter to Master Card"}),(0,t.jsx)("div",{className:"mb-6 flex justify-center",children:(0,t.jsxs)("div",{className:"w-16 h-20 bg-gradient-to-br from-purple-400 to-purple-600 border-2 border-purple-500 rounded-lg flex flex-col items-center justify-center text-white font-bold shadow-lg",children:[(0,t.jsx)("div",{className:"text-center leading-none",children:"★"}),(0,t.jsx)("div",{className:"text-xs opacity-80 mt-1",children:s.points}),(0,t.jsx)("div",{className:"text-[10px] opacity-60 mt-1 leading-none",children:"MASTER"})]})}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Choose a letter to assign:"}),(0,t.jsx)("div",{className:"grid grid-cols-9 gap-2 max-h-48 overflow-y-auto",children:u.map(e=>(0,t.jsx)("button",{onClick:()=>i(e),onKeyDown:c,className:`w-8 h-8 border-2 rounded-md font-bold text-sm transition-colors ${d===e?"bg-purple-600 border-purple-700 text-white":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:e},e))})]}),(0,t.jsx)("div",{className:"mb-6 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,t.jsxs)("p",{className:"text-blue-700 text-sm",children:[(0,t.jsx)("strong",{children:"Note:"}),' Once assigned, this master card will always represent the letter "',d||"?",'" for the rest of the game.']})}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:o,disabled:!d,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Assign Letter"})]})]})}):null}function x({gameState:e,onEndTurn:s,onStartGame:r,onNewGame:a}){let d=(0,n.PL)(e),l=(()=>{switch(e.gamePhase){case"lobby":return{text:"Game Lobby",color:"bg-blue-600",action:"Start Game"};case"playing":return{text:"Game in Progress",color:"bg-green-600",action:"End Turn"};case"roundEnd":return{text:"Round Ended",color:"bg-yellow-600",action:"Next Round"};case"gameOver":return{text:"Game Over",color:"bg-red-600",action:"New Game"};default:return{text:"Unknown",color:"bg-gray-600",action:""}}})(),i=()=>{switch(e.gamePhase){case"lobby":r?.();break;case"playing":s?.();break;case"gameOver":a?.()}};if("gameOver"===e.gamePhase){let s=e.players.find(s=>s.id===e.winner);return(0,t.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-white font-bold text-lg mb-2",children:"Game Over!"}),s&&(0,t.jsxs)("p",{className:"text-white/80 mb-3",children:["Winner: ",(0,t.jsx)("span",{className:"font-semibold text-yellow-400",children:s.name})]}),(0,t.jsx)("div",{className:"space-y-2",children:e.players.map(e=>(0,t.jsxs)("div",{className:"flex justify-between text-white/70 text-sm",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsxs)("span",{className:"font-semibold",children:[e.score," points"]})]},e.id))}),(0,t.jsx)("button",{onClick:i,className:"mt-4 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"New Game"})]})})}return(0,t.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/20",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`w-3 h-3 rounded-full ${l.color}`}),(0,t.jsx)("span",{className:"text-white/80 text-sm font-medium",children:l.text})]}),(0,t.jsxs)("span",{className:"text-white/60 text-xs",children:["Round ",e.roundNumber]})]}),"playing"===e.gamePhase&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white/70 text-sm",children:"Current Turn:"}),(0,t.jsx)("span",{className:"text-white font-semibold",children:d.name})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white/70 text-sm",children:"Cards in Hand:"}),(0,t.jsx)("span",{className:"text-white font-semibold",children:d.hand.length})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white/70 text-sm",children:"Score:"}),(0,t.jsx)("span",{className:"text-white font-semibold",children:d.score})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white/70 text-sm",children:"Discard Status:"}),(0,t.jsx)("span",{className:`font-semibold ${d.hasDiscardedThisTurn?"text-green-400":"text-red-400"}`,children:d.hasDiscardedThisTurn?"✓ Discarded":"✗ Not Discarded"})]}),(0,t.jsx)("button",{onClick:i,className:"w-full mt-2 px-3 py-1.5 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition-colors text-sm font-medium",children:"End Turn"})]}),"lobby"===e.gamePhase&&(0,t.jsx)("button",{onClick:i,className:"w-full px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium",children:"Start Game"})]})}function p({isOpen:e,selectedCards:s,wordToExtend:r,onClose:l,onConfirm:i}){let[o,c]=(0,a.useState)(""),[m,u]=(0,a.useState)(""),h=e=>{c(e.toUpperCase()),u("")},x=()=>{if(!r)return;if(!(0,n.Ln)(o))return void u("Word must be at least 2 letters long and contain only letters.");let e=s.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter);return(0,n.y9)(r.word,e,o)?o===r.word?void u("New word must be different from the original word."):void i(o):void u(`New word cannot be formed by inserting the selected letters into "${r.word}".`)};return e&&r?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-[90vw]",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Extend Word"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Original Word:"}),(0,t.jsx)("div",{className:"flex gap-1 mb-2",children:r.cards.map(e=>(0,t.jsx)(d.A,{card:e,size:"sm"},e.id))}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:r.word})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Cards to Add:"}),(0,t.jsx)("div",{className:"flex gap-1 mb-2",children:s.map(e=>(0,t.jsx)(d.A,{card:e,size:"sm"},e.id))}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Letters: ",s.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter).join("")]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Extended Word:"}),(0,t.jsxs)("div",{className:"text-xs text-gray-600 mb-2",children:["\uD83D\uDCA1 ",(0,t.jsx)("strong",{children:"Tip:"})," The original word is pre-filled. Click anywhere in the word to position your cursor, then type your new letters."]}),(0,t.jsx)("input",{type:"text",value:o,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key?x():"Escape"===e.key&&l()},placeholder:"Click to position cursor and type your new letters",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",autoFocus:!0})]}),m&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,t.jsx)("p",{className:"text-red-600 text-sm",children:m})}),o&&!m&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:[(0,t.jsxs)("p",{className:"text-green-700 text-sm",children:[(0,t.jsx)("strong",{children:"Preview:"})," ",o]}),(0,t.jsxs)("p",{className:"text-green-600 text-xs",children:["Length: ",o.length," letters"]})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)("button",{onClick:l,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:x,disabled:!o.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Extend Word"})]})]})}):null}function g({gameState:e,onCardSelect:s,onPlayWord:r,onDiscard:d,onDraw:i,onGameStateUpdate:o}){let[u,g]=(0,a.useState)(new Set),[f,b]=(0,a.useState)(!1),[y,w]=(0,a.useState)({isOpen:!1,card:null}),[j,N]=(0,a.useState)({isOpen:!1,wordToExtend:null}),[v,C]=(0,a.useState)(!1),[k,T]=(0,a.useState)(null),[P,D]=(0,a.useState)(null),S=(0,n.PL)(e);(0,a.useCallback)(r=>{let t=function(e,s,r){let t=(0,n.PL)(r);if(!t.isCurrentTurn||"playing"!==r.gamePhase)return{newSelectedCards:s,shakeHand:!1};let a=e.key.toUpperCase();if("Backspace"===e.key){if(s.size>0){let e=Array.from(s).map(e=>t.hand.find(s=>s.id===e)),r=e[e.length-1],a=new Set(s);return a.delete(r.id),console.log("Last card deselected via backspace:",r.letter,"Selected cards:",Array.from(a)),{newSelectedCards:a,shakeHand:!1,deselectedCard:r}}return{newSelectedCards:s,shakeHand:!1}}let d=t.hand.find(e=>e.letter===a||e.isMaster&&e.assignedLetter===a);if(!d)return console.log("Invalid key pressed:",a,"No matching card found"),{newSelectedCards:s,shakeHand:!0};{let e=new Set(s);return e.has(d.id)?(e.delete(d.id),console.log("Card deselected via keyboard:",d.letter,"Selected cards:",Array.from(e)),{newSelectedCards:e,shakeHand:!1,deselectedCard:d}):(e.add(d.id),console.log("Card selected via keyboard:",d.letter,"Selected cards:",Array.from(e)),{newSelectedCards:e,shakeHand:!1,selectedCard:d})}}(r,u,e);g(t.newSelectedCards),t.shakeHand&&(b(!0),setTimeout(()=>b(!1),500)),t.selectedCard?s?.(t.selectedCard,S.id):t.deselectedCard&&s?.(t.deselectedCard,S.id)},[u,e,s,S.id]);let $={roundNumber:e.roundNumber,currentPlayerName:S.name,deckSize:e.deck.length,discardSize:e.discardPile.length},E=async()=>{if("playing"!==e.gamePhase||!S.isCurrentTurn||0===u.size)return;let s=Array.from(u).map(e=>S.hand.find(s=>s.id===e)),t=s.map(e=>e.isMaster&&e.assignedLetter?e.assignedLetter:e.letter).join("");if(!(0,n.Ln)(t)){D({message:"Word must be at least 2 letters long",type:"error"}),setTimeout(()=>D(null),2e3);return}D({message:"Checking word validity...",type:"success"});let a=await (0,n.AT)(e,S.id,s,t);a.success?(o?.(a.gameState),r?.(),g(new Set),D({message:`Word "${t}" played successfully!`,type:"success"}),setTimeout(()=>D(null),3e3)):(D({message:a.error||"Failed to play word",type:"error"}),setTimeout(()=>D(null),4e3))},L=async s=>{if(!j.wordToExtend)return;let r=Array.from(u).map(e=>S.hand.find(s=>s.id===e));D({message:"Checking word validity...",type:"success"});let t=await (0,n.GP)(e,S.id,j.wordToExtend.id,r,s);t.success?(o?.(t.gameState),N({isOpen:!1,wordToExtend:null}),g(new Set),D({message:`Extended word to: "${s}"!`,type:"success"}),setTimeout(()=>D(null),3e3)):(D({message:t.error||"Failed to extend word",type:"error"}),setTimeout(()=>D(null),4e3))},A=()=>{C(!1),T(null)};return(0,t.jsxs)("div",{className:"w-full h-full bg-gradient-to-br from-green-800 to-green-600 p-2 min-h-0 overflow-hidden relative",children:[(0,t.jsx)("div",{className:"h-28 flex-shrink-0",children:(0,t.jsx)(l,{player:e.players[1],isCurrentPlayer:!1,isOpponent:!0})}),(0,t.jsxs)("div",{className:"flex-1 flex min-h-0 overflow-hidden",children:[(0,t.jsx)("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:(0,t.jsx)(c,{playedWords:e.playedWords,players:e.players,gameStatus:$,isExtendMode:v,selectedWordId:k,onWordSelect:s=>{if(!v)return;let r=e.playedWords.find(e=>e.id===s);r&&(T(s),N({isOpen:!0,wordToExtend:r}),C(!1))}})}),(0,t.jsxs)("div",{className:"w-64 ml-2 flex-shrink-0 flex flex-col gap-2",children:[(0,t.jsx)(x,{gameState:e,onEndTurn:()=>{let s=(0,n.xw)(e);o?.(s),g(new Set);let r=(0,n.PL)(s);D({message:`Turn ended. ${r.name}'s turn now.`,type:"success"}),setTimeout(()=>D(null),2e3),console.log("Turn ended")},onStartGame:()=>{let s=(0,n.zj)([e.players[0].name,e.players[1].name]);o?.(s),D({message:"Game started!",type:"success"}),setTimeout(()=>D(null),2e3),console.log("Game started")},onNewGame:()=>{let s={...e,gamePhase:"lobby",winner:null,playedWords:[],roundNumber:1};o?.(s),D({message:"New game ready!",type:"success"}),setTimeout(()=>D(null),2e3),console.log("New game prepared")}}),(0,t.jsx)(m,{deckSize:e.deck.length,discardPile:e.discardPile,tempDiscardedCard:e.tempDiscardedCard,selectedCardsCount:u.size,onPlayWord:E,onExtendWord:()=>{if("playing"===e.gamePhase&&S.isCurrentTurn){if(0===e.playedWords.length){D({message:"No words on the board to extend",type:"error"}),setTimeout(()=>D(null),2e3);return}C(!0),T(null),D({message:"Click on a word to extend it",type:"success"}),setTimeout(()=>D(null),3e3)}},onCancelExtend:A,onDiscard:()=>{if("playing"!==e.gamePhase||!S.isCurrentTurn||1!==u.size)return;let s=Array.from(u)[0],r=S.hand.find(e=>e.id===s);if(!r)return;let t=(0,n.Ds)(e,S.id,r);o?.(t),d?.(),g(new Set),D({message:`Discarded: ${r.letter}. You can now draw a card.`,type:"success"}),setTimeout(()=>D(null),3e3),console.log(`Card discarded: ${r.letter}`)},onDraw:()=>{if("playing"!==e.gamePhase||!S.isCurrentTurn)return;if(!S.hasDiscardedThisTurn){D({message:"Must discard a card before drawing",type:"error"}),setTimeout(()=>D(null),2e3),console.log("Cannot draw: must discard first");return}if(0===e.deck.length){D({message:"Cannot draw: deck is empty",type:"error"}),setTimeout(()=>D(null),2e3),console.log("Cannot draw: deck is empty");return}let s=(0,n.Fy)(e,S.id);o?.(s),i?.(),D({message:"Card drawn from deck",type:"success"}),setTimeout(()=>D(null),2e3),console.log("Card drawn from deck")},onDrawFromDiscard:()=>{if("playing"!==e.gamePhase||!S.isCurrentTurn)return;if(!S.hasDiscardedThisTurn){D({message:"Must discard a card before drawing",type:"error"}),setTimeout(()=>D(null),2e3),console.log("Cannot draw from discard: must discard first");return}if(e.discardPile.length<1){D({message:"Cannot draw from discard: discard pile is empty",type:"error"}),setTimeout(()=>D(null),2e3),console.log("Cannot draw from discard: discard pile is empty");return}let s=(0,n.ph)(e,S.id);o?.(s),i?.(),D({message:"Card drawn from discard pile",type:"success"}),setTimeout(()=>D(null),2e3),console.log("Card drawn from discard pile")},isCurrentTurn:S.isCurrentTurn,gamePhase:e.gamePhase,hasDiscardedThisTurn:S.hasDiscardedThisTurn,hasPlayedWords:e.playedWords.length>0,isExtendMode:v})]})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-52 bg-gradient-to-br from-green-800 to-green-600",children:(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(l,{player:e.players[0],isCurrentPlayer:!0,selectedCards:u,onCardClick:(r,t)=>{if(t===S.id&&"playing"===e.gamePhase){if(r.isMaster&&!r.assignedLetter)return void w({isOpen:!0,card:r});let e=new Set(u);e.has(r.id)?e.delete(r.id):e.add(r.id),g(e),console.log("Card clicked:",r.letter,"Selected cards:",Array.from(e)),s?.(r,t)}},shakeHand:f})})}),(0,t.jsx)(h,{isOpen:y.isOpen,masterCard:y.card,onClose:()=>w({isOpen:!1,card:null}),onAssignLetter:(s,r)=>{let t={...e,players:e.players.map(e=>({...e,hand:e.hand.map(e=>e.id===s?{...e,assignedLetter:r}:e)}))};o?.(t),w({isOpen:!1,card:null}),console.log(`Master card ${s} assigned letter: ${r}`)}}),(0,t.jsx)(p,{isOpen:j.isOpen,selectedCards:Array.from(u).map(e=>S.hand.find(s=>s.id===e)),wordToExtend:j.wordToExtend,onClose:()=>{N({isOpen:!1,wordToExtend:null}),A()},onConfirm:L}),P&&(0,t.jsx)("div",{className:`fixed top-4 right-4 px-4 py-2 rounded-md text-white text-sm font-medium z-50 transition-all duration-300 ${"success"===P.type?"bg-green-600":"bg-red-600"}`,children:P.message})]})}},4431:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o,metadata:()=>i});var t=r(7413),a=r(2202),n=r.n(a),d=r(4988),l=r.n(d);r(1135);let i={title:"Create Next App",description:"Generated by create next app"};function o({children:e}){return(0,t.jsx)("html",{lang:"en",children:(0,t.jsx)("body",{className:`${n().variable} ${l().variable} antialiased`,children:e})})}},6152:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},6634:(e,s,r)=>{"use strict";r.d(s,{A:()=>n});var t=r(687),a=r(1121);function n({card:e,isSelected:s=!1,isPlayable:r=!0,isFaceDown:n=!1,onClick:d,className:l="",size:i="md"}){let o=`
    ${{sm:"w-10 h-14 text-xs",md:"w-12 h-16 text-sm",lg:"w-16 h-20 text-base"}[i]}
    border-2 rounded-lg flex flex-col items-center justify-center font-bold cursor-pointer
    transition-all duration-200 select-none
    ${n?"bg-gray-800 border-gray-600":""}
    ${!n&&!r?"opacity-50 cursor-not-allowed":""}
    ${l}
  `,c=n?"bg-gray-800 border-gray-600 text-gray-300":e.isMaster?"bg-gradient-to-br from-purple-400 to-purple-600 border-purple-500 text-white shadow-lg":"bg-gradient-to-br from-blue-400 to-blue-600 border-blue-500 text-white shadow-md";return(0,t.jsx)(a.P.div,{className:`${o} ${c} ${s?"ring-4 ring-yellow-400 ring-opacity-75 scale-110 shadow-xl":"hover:scale-105 hover:shadow-lg"}`,onClick:()=>{d&&r&&!n&&d()},whileHover:r&&!n?{scale:1.05}:{},whileTap:r&&!n?{scale:.95}:{},animate:{scale:s?1.1:1,rotateY:180*!!n},transition:{duration:.2},children:n?(0,t.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,t.jsx)("div",{className:"text-gray-400 text-xs",children:"\uD83C\uDCA0"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-center leading-none",children:e.isMaster?e.assignedLetter?e.assignedLetter:"★":e.letter}),(0,t.jsx)("div",{className:"text-xs opacity-80 mt-1",children:e.points}),e.isMaster&&(0,t.jsx)("div",{className:"text-[10px] opacity-60 mt-1 leading-none",children:e.assignedLetter?"MASTER":"ASSIGN"})]})})}}};